P5 Pascal compiler vs. 1.4.x
Pascal-P5 complies with the requirements of level 0 of ISO/IEC 7185.


     1      -32 { 
     2      -32  
     3      -32 PRT test 1873: Use of tag allocated record as VAR parameter. 
     4      -32  
     5      -32     Tests that use of tag allocated record as a VAR parameter assignment  
     6      -32     generates error. 
     7      -32      
     8      -32     6.6.5.3 Dynamic allocation procedures 
     9      -32      
    10      -32     ... 
    11      -32      
    12      -32     new(p,c l ,...,cn) 
    13      -32      
    14      -32     ... 
    15      -32      
    16      -32     It shall be an error if a variable created using the second form of new is 
    17      -32     accessed by the identified-variable of the variable-access of a factor, of 
    18      -32     an assignment-statement, or of an actual-parameter. 
    19      -32  
    20      -32 } 
    21      -32  
    22      -32 program iso7185prt1873; 
    23      -32  
    24      -32 type r = record case b: boolean of 
    25      -32            true: (i: integer); 
    26      -32            false: (c: char) 
    27      -32          end; 
    28      -32           
    29      -32 var rp: ^r; 
    30      -32     x: r; 
    31      -32              
    32      -32 procedure y(var z: r); 
    33      -36  
    34      -36 begin 
    35        3  
    36        3 end; 
z          unreferenced

    37        6  
    38        6 begin 
    39        6  
    40        6    new(rp, true); 
    41       13    rp^.b := true; 
    42       19    rp^.i := 42; 
    43       29    y(rp^) 
    44       33     
    45       33 end. 
x          unreferenced


Errors in program: 0
